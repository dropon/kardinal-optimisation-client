/*
Kardinal ARO API

This document specifies the REST API of Kardinal ARO v2.

API version: 2.45.0
Contact: contact@kardinal.ai
*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

package openapi

import (
	"encoding/json"
	"fmt"
)

// ResourceVehicleProfile - struct for ResourceVehicleProfile
type ResourceVehicleProfile struct {
	VehicleProfileBicycle    *VehicleProfileBicycle
	VehicleProfileCar        *VehicleProfileCar
	VehicleProfileFly        *VehicleProfileFly
	VehicleProfileMotorbike  *VehicleProfileMotorbike
	VehicleProfilePedestrian *VehicleProfilePedestrian
	VehicleProfileScooter    *VehicleProfileScooter
	VehicleProfileTruck      *VehicleProfileTruck
}

// VehicleProfileBicycleAsResourceVehicleProfile is a convenience function that returns VehicleProfileBicycle wrapped in ResourceVehicleProfile
func VehicleProfileBicycleAsResourceVehicleProfile(v *VehicleProfileBicycle) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileBicycle: v,
	}
}

// VehicleProfileCarAsResourceVehicleProfile is a convenience function that returns VehicleProfileCar wrapped in ResourceVehicleProfile
func VehicleProfileCarAsResourceVehicleProfile(v *VehicleProfileCar) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileCar: v,
	}
}

// VehicleProfileFlyAsResourceVehicleProfile is a convenience function that returns VehicleProfileFly wrapped in ResourceVehicleProfile
func VehicleProfileFlyAsResourceVehicleProfile(v *VehicleProfileFly) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileFly: v,
	}
}

// VehicleProfileMotorbikeAsResourceVehicleProfile is a convenience function that returns VehicleProfileMotorbike wrapped in ResourceVehicleProfile
func VehicleProfileMotorbikeAsResourceVehicleProfile(v *VehicleProfileMotorbike) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileMotorbike: v,
	}
}

// VehicleProfilePedestrianAsResourceVehicleProfile is a convenience function that returns VehicleProfilePedestrian wrapped in ResourceVehicleProfile
func VehicleProfilePedestrianAsResourceVehicleProfile(v *VehicleProfilePedestrian) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfilePedestrian: v,
	}
}

// VehicleProfileScooterAsResourceVehicleProfile is a convenience function that returns VehicleProfileScooter wrapped in ResourceVehicleProfile
func VehicleProfileScooterAsResourceVehicleProfile(v *VehicleProfileScooter) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileScooter: v,
	}
}

// VehicleProfileTruckAsResourceVehicleProfile is a convenience function that returns VehicleProfileTruck wrapped in ResourceVehicleProfile
func VehicleProfileTruckAsResourceVehicleProfile(v *VehicleProfileTruck) ResourceVehicleProfile {
	return ResourceVehicleProfile{
		VehicleProfileTruck: v,
	}
}

// Unmarshal JSON data into one of the pointers in the struct
func (dst *ResourceVehicleProfile) UnmarshalJSON(data []byte) error {
	// 1. Define a helper struct to extract the discriminator field
	var discriminator struct {
		Type string `json:"type"`
	}

	// 2. Read only the 'type' field from the JSON data
	if err := json.Unmarshal(data, &discriminator); err != nil {
		return fmt.Errorf("failed to read 'type' discriminator field: %w", err)
	}

	// 3. Use the discriminator value to select the correct profile type
	switch discriminator.Type {
	case "bicycle":
		dst.VehicleProfileBicycle = &VehicleProfileBicycle{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileBicycle); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileBicycle: %w", err)
		}
		// Optional: Re-run validation if necessary, otherwise the check can be skipped
		// if err := validator.Validate(dst.VehicleProfileBicycle); err != nil {
		//     return fmt.Errorf("validation failed for Bicycle profile: %w", err)
		// }
		return nil

	case "car":
		dst.VehicleProfileCar = &VehicleProfileCar{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileCar); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileCar: %w", err)
		}
		return nil

	case "fly":
		dst.VehicleProfileFly = &VehicleProfileFly{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileFly); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileFly: %w", err)
		}
		return nil

	case "motorbike":
		dst.VehicleProfileMotorbike = &VehicleProfileMotorbike{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileMotorbike); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileMotorbike: %w", err)
		}
		return nil

	case "pedestrian":
		dst.VehicleProfilePedestrian = &VehicleProfilePedestrian{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfilePedestrian); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfilePedestrian: %w", err)
		}
		return nil

	case "scooter":
		dst.VehicleProfileScooter = &VehicleProfileScooter{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileScooter); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileScooter: %w", err)
		}
		return nil

	case "truck":
		dst.VehicleProfileTruck = &VehicleProfileTruck{}
		if err := newStrictDecoder(data).Decode(dst.VehicleProfileTruck); err != nil {
			return fmt.Errorf("failed to unmarshal as VehicleProfileTruck: %w", err)
		}
		return nil

	default:
		// Handle unknown or missing type
		return fmt.Errorf("data failed to match schemas in oneOf(ResourceVehicleProfile): unknown type '%s'", discriminator.Type)
	}
}

// Marshal data from the first non-nil pointers in the struct to JSON
func (src ResourceVehicleProfile) MarshalJSON() ([]byte, error) {
	if src.VehicleProfileBicycle != nil {
		return json.Marshal(&src.VehicleProfileBicycle)
	}

	if src.VehicleProfileCar != nil {
		return json.Marshal(&src.VehicleProfileCar)
	}

	if src.VehicleProfileFly != nil {
		return json.Marshal(&src.VehicleProfileFly)
	}

	if src.VehicleProfileMotorbike != nil {
		return json.Marshal(&src.VehicleProfileMotorbike)
	}

	if src.VehicleProfilePedestrian != nil {
		return json.Marshal(&src.VehicleProfilePedestrian)
	}

	if src.VehicleProfileScooter != nil {
		return json.Marshal(&src.VehicleProfileScooter)
	}

	if src.VehicleProfileTruck != nil {
		return json.Marshal(&src.VehicleProfileTruck)
	}

	return nil, nil // no data in oneOf schemas
}

// Get the actual instance
func (obj *ResourceVehicleProfile) GetActualInstance() interface{} {
	if obj == nil {
		return nil
	}
	if obj.VehicleProfileBicycle != nil {
		return obj.VehicleProfileBicycle
	}

	if obj.VehicleProfileCar != nil {
		return obj.VehicleProfileCar
	}

	if obj.VehicleProfileFly != nil {
		return obj.VehicleProfileFly
	}

	if obj.VehicleProfileMotorbike != nil {
		return obj.VehicleProfileMotorbike
	}

	if obj.VehicleProfilePedestrian != nil {
		return obj.VehicleProfilePedestrian
	}

	if obj.VehicleProfileScooter != nil {
		return obj.VehicleProfileScooter
	}

	if obj.VehicleProfileTruck != nil {
		return obj.VehicleProfileTruck
	}

	// all schemas are nil
	return nil
}

// Get the actual instance value
func (obj ResourceVehicleProfile) GetActualInstanceValue() interface{} {
	if obj.VehicleProfileBicycle != nil {
		return *obj.VehicleProfileBicycle
	}

	if obj.VehicleProfileCar != nil {
		return *obj.VehicleProfileCar
	}

	if obj.VehicleProfileFly != nil {
		return *obj.VehicleProfileFly
	}

	if obj.VehicleProfileMotorbike != nil {
		return *obj.VehicleProfileMotorbike
	}

	if obj.VehicleProfilePedestrian != nil {
		return *obj.VehicleProfilePedestrian
	}

	if obj.VehicleProfileScooter != nil {
		return *obj.VehicleProfileScooter
	}

	if obj.VehicleProfileTruck != nil {
		return *obj.VehicleProfileTruck
	}

	// all schemas are nil
	return nil
}

type NullableResourceVehicleProfile struct {
	value *ResourceVehicleProfile
	isSet bool
}

func (v NullableResourceVehicleProfile) Get() *ResourceVehicleProfile {
	return v.value
}

func (v *NullableResourceVehicleProfile) Set(val *ResourceVehicleProfile) {
	v.value = val
	v.isSet = true
}

func (v NullableResourceVehicleProfile) IsSet() bool {
	return v.isSet
}

func (v *NullableResourceVehicleProfile) Unset() {
	v.value = nil
	v.isSet = false
}

func NewNullableResourceVehicleProfile(val *ResourceVehicleProfile) *NullableResourceVehicleProfile {
	return &NullableResourceVehicleProfile{value: val, isSet: true}
}

func (v NullableResourceVehicleProfile) MarshalJSON() ([]byte, error) {
	return json.Marshal(v.value)
}

func (v *NullableResourceVehicleProfile) UnmarshalJSON(src []byte) error {
	v.isSet = true
	return json.Unmarshal(src, &v.value)
}
